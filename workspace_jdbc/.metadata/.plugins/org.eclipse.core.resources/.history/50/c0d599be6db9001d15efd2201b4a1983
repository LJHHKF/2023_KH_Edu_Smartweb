package main;

import java.util.Scanner;

import dao.MembersDAO;
import dao.MessagesDAO;

public class Main {
	public static void main(String[] args) {
		try {
			Class.forName("oracle.jdbc.driver.OracleDriver");
		}catch(Exception e) {
			System.out.println("라이브러리 탐색 실패");
			e.printStackTrace();
			System.exit(0);
		}
		
		final Main self = new Main();
		final String url = "jdbc:oracle:thin:@localhost:1521:xe";
		final String dbID = "board";
		final String dbPW = "board";
		MembersDAO dao_member = new MembersDAO(url, dbID, dbPW);
		MessagesDAO dao_message = new MessagesDAO(url, dbID, dbPW);
		int menu = 0;

		try(Scanner sc = new Scanner(System.in)){
			//로그인 파트
			while(true) {
				String infoText = "<< menu >>" + System.lineSeparator()
									+"1. 로그인" + System.lineSeparator()
									+"2. 회원가입" + System.lineSeparator()
									+"0. 종료" + System.lineSeparator()
									+">>";
				menu = self.inputNumber(sc, infoText);
				if(menu == 0) {
					System.out.println("시스템을 종료합니다.");
					System.exit(0);
				}else if(menu == 1) {

				}else if(menu == 2) {
					while(true) {
						System.out.println("<< 회원 가입 >>"); //아이디, 패스워드, 이름, 연락처
						System.out.println("회원가입 중 종료를 원하면 언제든지 0을 입력해주세요.");
						String id = self.inputText(sc, "ID를 입력해주세요 : ");
						if(id.equals("0")) break;
						
						
						break;
					}
				}else {
					System.out.println("메뉴를 다시 확인해주세요.");
				}
			}
		}catch(Exception e) {
			e.printStackTrace();
			System.exit(0);
		}
	}
	private int inputNumber(Scanner sc, String infoText) {
		int result = 0;
		while(true) {
			try {
				System.out.print(infoText);
				result = Integer.parseInt(sc.nextLine());
				break;
			}catch(Exception e) {
				System.out.println("숫자 형식으로 입력해 주셔야 합니다.");
				e.printStackTrace();
			}
		}
		return result;
	}
	
	private String inputText(Scanner sc, String infoText) {
		System.out.print(infoText);
		return sc.nextLine();
	}
}
